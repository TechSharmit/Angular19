<h1>
    Angular 19 Course by Tech Sharmit
</h1>


<h2>
    Resolver with Real API Call in Angular
</h2>


<button routerLink="/About">

    Go to About Page

</button>

<router-outlet></router-outlet>

import { bootstrapApplication } from '@angular/platform-browser';
import { appConfig } from './app/app.config';
import { AppComponent } from './app/app.component';
import { provideRouter } from '@angular/router';
import { provideHttpClient } from '@angular/common/http';
import { routes } from './app/app.routes';

bootstrapApplication(AppComponent, {
  providers: [provideRouter(routes), provideHttpClient()],
}).catch((err) => console.error(err));


import { HttpClient } from '@angular/common/http';
import { inject } from '@angular/core';
import { ResolveFn } from '@angular/router';
import { catchError, of } from 'rxjs';

export const abtResolver: ResolveFn<any> = (route, state) => {
  console.log('Resolver executing before AboutComponent loads.');

  const http = inject(HttpClient);

  const apiUrl = 'https://jsonplaceholder.typicode.com/users/1';

  //API Call + Error Handling

  return http.get(apiUrl).pipe(
    catchError((err) => {
      console.error('API error: ', err);
      return of({ name: 'Error User', email: 'N/A', company: { name: 'N/A' } });
    })
  );
};



import { Routes } from '@angular/router';
import { AboutComponent } from './about/about.component';
import { abtResolver } from './MyResolver/abt.resolver';
export const routes: Routes = [
  {
    path: '',
    redirectTo: 'About',
    pathMatch: 'full',
  },

  {
    path: 'About',
    component: AboutComponent,
    resolve: { aboutData: abtResolver },
  },
];



import { CommonModule } from '@angular/common';
import { Component } from '@angular/core';
import { ActivatedRoute } from '@angular/router';

@Component({
  selector: 'app-about',
  imports: [CommonModule],
  templateUrl: './about.component.html',
  styleUrl: './about.component.css',
})
export class AboutComponent {
  UserInfo: any;

  constructor(private route: ActivatedRoute) {}

  ngOnInit() {
    this.route.data.subscribe((data) => {
      this.UserInfo = data['aboutData'];
      console.log('Data Received from resolver');
    });
  }
}



<h1>About Page!</h1>

<div *ngIf="UserInfo; else loading">

    <p>
        Name : {{UserInfo.name}}
    </p>

    <p>
        Email : {{UserInfo.email}}
    </p>

    <p>
        Company : {{UserInfo.company.name}}
    </p>

</div>

<ng-template #loading>

    <p>
        Loading user data...
    </p>

</ng-template>



import { assertPlatform, Component } from '@angular/core';
import { RouterLink, RouterOutlet } from '@angular/router';

@Component({
  selector: 'app-root',
  standalone: true,
  imports: [RouterLink, RouterOutlet],
  providers: [],
  templateUrl: './app.component.html',
  styleUrl: './app.component.css',
})
export class AppComponent {}
